<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自毁网页示例</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            overflow: hidden; /* 防止滚动 */
        }

        #content {
            text-align: center;
            position: absolute;
            top: 20px; /* 顶部放置 */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
            width: 100%;
            max-width: 600px;
        }

        /* 粒子动画容器 */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 2;
            display: none; /* 初始隐藏 */
            pointer-events: none; /* 不影响交互 */
        }

        /* 用户提供的图片CSS动画 - 调整为全屏显示 */
        @keyframes glowFlow {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.7; box-shadow: 0 0 6px rgba(160,130,255,0.4); }
            50% { opacity: 1; box-shadow: 0 0 12px rgba(160,130,255,0.8); }
        }

        #bendan-img {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            object-fit: cover; /* 全屏覆盖，保持比例 */
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(160,130,255,0.3) 30%, 
                rgba(160,130,255,0.1) 50%, 
                transparent 100%
            );
            background-size: 200% 100%;
            animation: 
                glowFlow 2s linear infinite,
                breathe 3s ease-in-out infinite;
            border-radius: 0; /* 移除圆角以全屏 */
            display: block;
            z-index: 0; /* 图片在背景层 */
        }

        #countdown {
            font-size: 24px;
            color: red;
            margin-top: 10px;
            display: none; /* 初始隐藏 */
            position: absolute;
            bottom: 20px; /* 倒计时放到页面底部 */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        h1 {
            margin: 0;
            color: white; /* 白色以在图片上方可见，根据图片调整 */
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5); /* 添加阴影提升可见度 */
        }
    </style>
</head>
<body>
    <img id="bendan-img" src="assets/bendan.jpg" alt="bendan">
    <div id="content">
        <h1>笨蛋你想干什么！</h1>
    </div>
    <div id="countdown"></div>
    <canvas id="particle-canvas"></canvas>

    <script>
        // 页面加载后启动计时器
        window.onload = function() {
            var totalTime = 20; // 总自毁时间20秒
            var countdownElement = document.getElementById('countdown');
            var content = document.getElementById('content');
            var img = document.getElementById('bendan-img');
            var canvas = document.getElementById('particle-canvas');
            var ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            // 改进粒子系统：更细腻逼真，像Telegram燃烧（增加数量、多类型粒子、alpha渐变、模糊、随机速度）
            var particles = [];
            var particleCount = 500; // 增加粒子数量
            function createParticles() {
                for (var i = 0; i < particleCount; i++) {
                    var type = Math.random() > 0.7 ? 'smoke' : 'fire'; // 70%火花，30%烟雾
                    var color;
                    if (type === 'fire') {
                        color = 'rgba(' + Math.floor(255 - Math.random() * 50) + ', ' + Math.floor(100 + Math.random() * 155) + ', 0, '; // 橙红火
                    } else {
                        color = 'rgba(100, 100, 100, '; // 灰色烟雾
                    }
                    particles.push({
                        x: Math.random() * canvas.width, // 全屏随机，但模拟从中心爆发
                        y: Math.random() * canvas.height,
                        vx: (Math.random() - 0.5) * 6, // 更随机速度
                        vy: (Math.random() - 0.5) * 6 - 3, // 更向上飘，增加随机
                        size: Math.random() * 4 + 1, // 小粒子
                        alpha: 1, // 初始不透明
                        color: color,
                        life: Math.random() * 3 + 2, // 更长寿命
                        type: type
                    });
                }
            }

            function drawParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.globalCompositeOperation = 'lighter'; // 叠加模式使火焰更亮
                particles.forEach(function(p, index) {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = p.color + (p.alpha) + ')';
                    ctx.shadowBlur = 10; // 添加模糊，提升逼真
                    ctx.shadowColor = p.type === 'fire' ? 'orange' : 'gray';
                    ctx.fill();

                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy -= 0.05; // 轻微减速，模拟上升
                    p.size *= 0.98; // 缓慢缩小
                    p.alpha -= 0.01; // 渐变淡出
                    p.life -= 0.016;

                    if (p.life <= 0 || p.alpha <= 0 || p.size < 0.1) {
                        particles.splice(index, 1);
                    }
                });
                ctx.globalCompositeOperation = 'source-over'; // 重置

                if (particles.length > 0) {
                    requestAnimationFrame(drawParticles);
                } else {
                    canvas.style.display = 'none';
                }
            }

            // 启动倒计时interval
            var remaining = totalTime;
            var interval = setInterval(function() {
                remaining--;
                if (remaining <= 5 && remaining > 0) { // 改为从5s开始显示
                    countdownElement.style.display = 'block';
                    countdownElement.textContent = '剩余 ' + remaining + ' 秒...';
                } else if (remaining <= 0) {
                    clearInterval(interval);
                }
            }, 1000);

            // 20秒后触发销毁
            setTimeout(function() {
                if (content && img) {
                    // 隐藏内容和图片
                    content.style.display = 'none';
                    img.style.display = 'none';
                    countdownElement.style.display = 'none';

                    // 启动粒子燃烧动画
                    canvas.style.display = 'block';
                    createParticles();
                    drawParticles();
                }
                clearInterval(interval); // 停止interval
            }, totalTime * 1000);

            // 窗口调整时更新canvas大小
            window.addEventListener('resize', function() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        };
    </script>
</body>
</html>