<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Elysia 3D 展示</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

body {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #000; /* ✅ 黑色背景以衬托图片完整显示 */
}

/* === 可横向滑动的容器（用于手机） === */
#elysia-scroll-wrapper {
  width: 100vw;
  height: 100vh;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  position: relative;
}

/* === 全屏容器 === */
#elysia-container {
  position: relative;
  width: 160vw; /* ✅ 手机端可横向滑动 */
  height: 100vh;
  overflow: hidden;
  perspective: 800px;
}

/* === 主图 & 深度图 & 高光层 === */
#elysia-img, #elysia-depth, #elysia-highlight {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100vw;
  height: 100vh;
  object-fit: contain; /* ✅ 完整显示整张图 */
  transform-style: preserve-3d;
  transition: transform 0.15s ease-out;
  will-change: transform;
}

#elysia-depth {
  mix-blend-mode: multiply;
  opacity: 0.6;
  pointer-events: none;
}

/* === 高光层 === */
#elysia-highlight {
  pointer-events: none;
  mix-blend-mode: soft-light;
  background: radial-gradient(circle at 50% 30%, rgba(255,255,255,0.35), transparent 60%);
  transition: background 0.3s ease-out;
  animation: highlightBreathing 2.8s ease-in-out infinite;
}

/* === 高光呼吸动画 === */
@keyframes highlightBreathing {
  0% {
    opacity: 0.5;
    transform: scale(1);
    filter: blur(10px);
  }
  50% {
    opacity: 1;
    transform: scale(1.08);
    filter: blur(18px);
  }
  100% {
    opacity: 0.5;
    transform: scale(1);
    filter: blur(10px);
  }
}

/* === 菜单按钮隐藏（仅保留 index 页面使用） === */
.menu-btn {
  display: none !important;
}

/* === 菜单抽屉 === */
.menu-panel {
  position: fixed;
  top: 0;
  left: 0;
  height: 100%;
  width: 240px;
  background: rgba(40, 30, 60, 0.4);
  border-right: 1px solid rgba(255,255,255,0.15);
  backdrop-filter: blur(16px) saturate(180%);
  transform: translateX(-100%);
  transition: transform 0.4s cubic-bezier(.25,.8,.25,1);
  z-index: 9;
}
.menu-panel.show {
  transform: translateX(0);
}

/* === iPhone 安全区顶部 === */
.safe-area-top {
  position: fixed;
  top: env(safe-area-inset-top);
  left: 0;
  right: 0;
  height: env(safe-area-inset-top);
  background: transparent;
  z-index: 1;
}

/* 隐藏滚动条 */
#elysia-scroll-wrapper::-webkit-scrollbar {
  display: none;
}
</style>
</head>

<body>
<div id="elysia-scroll-wrapper">
  <div id="elysia-container">
    <!-- 主图 & 深度图 -->
    <img id="elysia-img" src="assets/wallhaven-7p1v79.jpg" alt="Elysia">
    <img id="elysia-depth" src="assets/wallhaven-7p1v79-deepth.png" alt="Depth">
    <div id="elysia-highlight"></div>

    <!-- 菜单按钮 -->
    <div class="menu-btn" id="menuBtn">
      <div></div><div></div><div></div>
    </div>

    <!-- 菜单 -->
    <div class="menu-panel" id="menuPanel">
      <!-- 后续添加内容 -->
    </div>
  </div>
</div>
<div class="safe-area-top"></div>

<script>
const mainImg = document.getElementById('elysia-img');
const depthImg = document.getElementById('elysia-depth');
const highlight = document.getElementById('elysia-highlight');

/* === 裸眼3D交互 + 动态高光 === */
function update3DEffect(clientX, clientY) {
  const x = (clientX / window.innerWidth - 0.5) * 30;
  const y = (clientY / window.innerHeight - 0.5) * -30;

  mainImg.style.transform = `translate(-50%, -50%) rotateY(${x}deg) rotateX(${y}deg) scale(1.02)`;
  depthImg.style.transform = `translate(-50%, -50%) rotateY(${x * 1.3}deg) rotateX(${y * 1.3}deg) scale(1.02)`;

  const posX = 50 + x * 1.8;
  const posY = 35 + y * 1.8;
  highlight.style.background = `radial-gradient(circle at ${posX}% ${posY}%, rgba(255,255,255,0.38), transparent 60%)`;
}

/* === 鼠标支持 === */
document.addEventListener('mousemove', e => update3DEffect(e.clientX, e.clientY));
document.addEventListener('mouseleave', () => {
  mainImg.style.transform = 'translate(-50%, -50%) rotateY(0deg) rotateX(0deg) scale(1)';
  depthImg.style.transform = 'translate(-50%, -50%) rotateY(0deg) rotateX(0deg) scale(1)';
  highlight.style.background = `radial-gradient(circle at 50% 30%, rgba(255,255,255,0.35), transparent 60%)`;
});

/* === 触摸支持 === */
document.addEventListener('touchmove', e => {
  const touch = e.touches[0];
  update3DEffect(touch.clientX, touch.clientY);
}, { passive: true });
document.addEventListener('touchend', () => {
  mainImg.style.transform = 'translate(-50%, -50%) rotateY(0deg) rotateX(0deg) scale(1)';
  depthImg.style.transform = 'translate(-50%, -50%) rotateY(0deg) rotateX(0deg) scale(1)';
  highlight.style.background = `radial-gradient(circle at 50% 30%, rgba(255,255,255,0.35), transparent 60%)`;
});
</script>
</body>
</html>