<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Elysia Player</title>

<style>
/* ===== 液态玻璃风格播放器 ===== */
body {
  background: radial-gradient(circle at top, #101018, #000);
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

.elysia-player {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 12px 20px;
  border-radius: 20px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.15);
  backdrop-filter: blur(15px) saturate(180%);
  -webkit-backdrop-filter: blur(15px) saturate(180%);
  color: white;
  font-family: "SF Pro Display", "PingFang SC", sans-serif;
}

.cover {
  width: 60px;
  height: 60px;
  border-radius: 12px;
  overflow: hidden;
  flex-shrink: 0;
}

.cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.song-info {
  flex: 1;
}

.song-title {
  font-weight: 600;
  font-size: 16px;
}

.song-artist {
  opacity: 0.8;
  font-size: 13px;
}

.controls {
  display: flex;
  gap: 10px;
  align-items: center;
}

button {
  background: none;
  border: none;
  color: white;
  font-size: 20px;
  cursor: pointer;
  transition: opacity 0.2s;
}
button:hover { opacity: 0.6; }

</style>
</head>
<body>

<div class="elysia-player">
  <div class="cover"><img id="cover" src="assets/elysia.jpg" alt="cover"></div>
  <div class="song-info">
    <div class="song-title" id="title">AKIBA POP the Future</div>
    <div class="song-artist" id="artist">Pianeet</div>
  </div>
  <div class="controls">
    <button id="prev">⏮</button>
    <button id="play">▶️</button>
    <button id="next">⏭</button>
  </div>
</div>

<audio id="audio" preload="auto"></audio>

<script>
/* ===== 播放列表 ===== */
const playlist = [
  {
    title: "AKIBA POP the Future",
    artist: "Pianeet",
    src: "assets/AKIBA POP the Future - Pianeet [Piano Transcription].mp3",
    cover: "assets/elysia.jpg"
  },
  {
    title: "Aoi Tori",
    artist: "The iDOLM@STER",
    src: "assets/[Pianeet] Aoi Tori - The iDOLM@STER OST - Piano Tutorial  Synthesia.mp3",
    cover: "assets/aoi_tori.jpg"
  }
];

let current = 0;
const audio = document.getElementById('audio');
const title = document.getElementById('title');
const artist = document.getElementById('artist');
const cover = document.getElementById('cover');
const playBtn = document.getElementById('play');

function loadSong(i) {
  const song = playlist[i];
  title.textContent = song.title;
  artist.textContent = song.artist;
  cover.src = song.cover;
  audio.src = song.src;
  updateMediaSession(song);
}

function playPause() {
  if (audio.paused) {
    audio.play();
    playBtn.textContent = '⏸';
  } else {
    audio.pause();
    playBtn.textContent = '▶️';
  }
}

function nextTrack() {
  current = (current + 1) % playlist.length;
  loadSong(current);
  audio.play();
  playBtn.textContent = '⏸';
}

function prevTrack() {
  current = (current - 1 + playlist.length) % playlist.length;
  loadSong(current);
  audio.play();
  playBtn.textContent = '⏸';
}

playBtn.addEventListener('click', playPause);
document.getElementById('next').addEventListener('click', nextTrack);
document.getElementById('prev').addEventListener('click', prevTrack);
loadSong(current);

/* ===== 灵动岛 / 锁屏信息显示 ===== */
if ('mediaSession' in navigator) {
  function updateMediaSession(song) {
    navigator.mediaSession.metadata = new MediaMetadata({
      title: song.title,
      artist: song.artist,
      album: 'Elysia Collection',
      artwork: [
        { src: song.cover, sizes: '512x512', type: 'image/jpeg' }
      ]
    });
  }

  navigator.mediaSession.setActionHandler('play', () => { audio.play(); playBtn.textContent = '⏸'; });
  navigator.mediaSession.setActionHandler('pause', () => { audio.pause(); playBtn.textContent = '▶️'; });
  navigator.mediaSession.setActionHandler('previoustrack', prevTrack);
  navigator.mediaSession.setActionHandler('nexttrack', nextTrack);

  audio.addEventListener('play', () => {
    navigator.mediaSession.playbackState = 'playing';
  });

  audio.addEventListener('pause', () => {
    navigator.mediaSession.playbackState = 'paused';
  });
}
<script>
if ('mediaSession' in navigator) {
  navigator.mediaSession.metadata = new MediaMetadata({
    title: 'AKIBA POP the Future',
    artist: 'Pianeet',
    album: 'Elysia Player',
    artwork: [
      { src: 'https://elysia-player-assets.vercel.app/cover.jpg', sizes: '512x512', type: 'image/jpeg' }
    ]
  });
}
</script>

</script>
</body>
</html>