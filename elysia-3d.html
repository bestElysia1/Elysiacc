<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>Elysia 3D 展示</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch; /* ✅ iPhone 上流畅滑动 */
}

body {
  display: flex;
  justify-content: center;
  align-items: center;
}

/* === 全屏容器 === */
#elysia-container {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  perspective: 800px;
}

/* === 主图 & 深度图 === */
#elysia-img, #elysia-depth, #elysia-highlight {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform-style: preserve-3d;
  transition: transform 0.15s ease-out;
  will-change: transform;
}

#elysia-depth {
  mix-blend-mode: multiply;
  opacity: 0.6;
  pointer-events: none;
}

/* === 高光层 === */
#elysia-highlight {
  pointer-events: none;
  mix-blend-mode: soft-light;
  background: radial-gradient(circle at 50% 30%, rgba(255,255,255,0.35), transparent 60%);
  transition: background 0.3s ease-out;
}

/* === 菜单按钮 === */
.menu-btn {
  position: fixed;
  top: calc(env(safe-area-inset-top) + 14px);
  left: 18px;
  width: 38px;
  height: 28px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  cursor: pointer;
  z-index: 10;
  opacity: 0;
  transition: opacity 0.5s ease;
}
.menu-btn.show { opacity: 1; }

.menu-btn div {
  height: 4px;
  border-radius: 2px;
  background: linear-gradient(90deg, rgba(180,150,255,0.8), rgba(150,180,255,0.6));
  box-shadow: 0 0 6px rgba(190,160,255,0.8);
}

/* === 菜单抽屉（液态玻璃） === */
.menu-panel {
  position: fixed;
  top: 0;
  left: 0;
  height: 100%;
  width: 240px;
  background: rgba(40, 30, 60, 0.4);
  border-right: 1px solid rgba(255,255,255,0.15);
  backdrop-filter: blur(16px) saturate(180%);
  transform: translateX(-100%);
  transition: transform 0.4s cubic-bezier(.25,.8,.25,1);
  z-index: 9;
}
.menu-panel.show {
  transform: translateX(0);
}

/* === iPhone安全区顶部 === */
.safe-area-top {
  position: fixed;
  top: env(safe-area-inset-top);
  left: 0;
  right: 0;
  height: env(safe-area-inset-top);
  background: transparent;
  z-index: 1;
}
</style>
</head>

<body>
<div id="elysia-container">
  <!-- 主图 & 深度图 -->
  <img id="elysia-img" src="assets/wallhaven-7p1v79.jpg" alt="Elysia">
  <img id="elysia-depth" src="assets/wallhaven-7p1v79-deepth.png" alt="Depth">
  <div id="elysia-highlight"></div>

  <!-- 菜单按钮 -->
  <div class="menu-btn" id="menuBtn">
    <div></div><div></div><div></div>
  </div>

  <!-- 菜单 -->
  <div class="menu-panel" id="menuPanel">
    <!-- 后续添加内容 -->
  </div>
</div>
<div class="safe-area-top"></div>

<script>
const mainImg = document.getElementById('elysia-img');
const depthImg = document.getElementById('elysia-depth');
const highlight = document.getElementById('elysia-highlight');
const menuBtn = document.getElementById('menuBtn');
const menuPanel = document.getElementById('menuPanel');

/* === 裸眼3D交互 + 动态高光 === */
function update3DEffect(clientX, clientY) {
  const x = (clientX / window.innerWidth - 0.5) * 30;
  const y = (clientY / window.innerHeight - 0.5) * -30;

  mainImg.style.transform = `rotateY(${x}deg) rotateX(${y}deg) scale(1.02)`;
  depthImg.style.transform = `rotateY(${x * 1.3}deg) rotateX(${y * 1.3}deg) scale(1.02)`;

  // 高光随触摸方向偏移
  const posX = 50 + x * 1.8;
  const posY = 35 + y * 1.8;
  highlight.style.background = `radial-gradient(circle at ${posX}% ${posY}%, rgba(255,255,255,0.38), transparent 60%)`;
}

/* === 鼠标支持 === */
document.addEventListener('mousemove', e => {
  update3DEffect(e.clientX, e.clientY);
});
document.addEventListener('mouseleave', () => {
  mainImg.style.transform = 'rotateY(0deg) rotateX(0deg) scale(1)';
  depthImg.style.transform = 'rotateY(0deg) rotateX(0deg) scale(1)';
  highlight.style.background = `radial-gradient(circle at 50% 30%, rgba(255,255,255,0.35), transparent 60%)`;
});

/* === 触摸支持（手机端） === */
document.addEventListener('touchmove', e => {
  const touch = e.touches[0];
  update3DEffect(touch.clientX, touch.clientY);
}, { passive: true });

document.addEventListener('touchend', () => {
  mainImg.style.transform = 'rotateY(0deg) rotateX(0deg) scale(1)';
  depthImg.style.transform = 'rotateY(0deg) rotateX(0deg) scale(1)';
  highlight.style.background = `radial-gradient(circle at 50% 30%, rgba(255,255,255,0.35), transparent 60%)`;
});

/* === 菜单按钮自动隐藏 === */
let scrollTimeout;
window.addEventListener('scroll', () => {
  menuBtn.classList.add('show');
  clearTimeout(scrollTimeout);
  scrollTimeout = setTimeout(() => menuBtn.classList.remove('show'), 2500);
});
setTimeout(() => menuBtn.classList.add('show'), 1000);
setTimeout(() => menuBtn.classList.remove('show'), 6000);

/* === 菜单交互 === */
menuBtn.addEventListener('click', e => {
  e.stopPropagation();
  menuPanel.classList.toggle('show');
});
document.addEventListener('click', e => {
  if (!menuPanel.contains(e.target) && e.target !== menuBtn) {
    menuPanel.classList.remove('show');
  }
});
</script>
</body>
</html>