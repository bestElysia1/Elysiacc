<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Elysia Music Player</title>
<style>
body {
  margin: 0;
  font-family: "Poppins", "微软雅黑", sans-serif;
  background: white;
  color: #6b5b95;
  overflow-x: hidden;
}

.elysia-player {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(20px);
  border-radius: 18px;
  box-shadow: 0 4px 20px rgba(200, 150, 255, 0.3);
  padding: 10px 20px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.elysia-player button {
  border: none;
  background: rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(10px);
  border-radius: 50%;
  padding: 10px;
  cursor: pointer;
  transition: all 0.3s ease;
}
.elysia-player button:hover {
  background: rgba(200, 160, 255, 0.4);
}

#playlist-container {
  position: fixed;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(25px);
  border-radius: 20px;
  padding: 20px;
  width: 220px;
  box-shadow: 0 6px 30px rgba(180, 140, 255, 0.3);
  transition: opacity 0.5s ease;
}
#playlist-container h3 {
  text-align: center;
  margin-bottom: 10px;
  color: #6b5b95;
}
#playlist {
  list-style: none;
  padding: 0;
  margin: 0;
}
#playlist li {
  padding: 8px 12px;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
}
#playlist li:hover {
  background: rgba(200, 160, 255, 0.15);
}
#playlist li.active {
  background: rgba(200, 160, 255, 0.35);
}

.group-list {
  position: fixed;
  left: 20px;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.5);
  backdrop-filter: blur(25px);
  border-radius: 20px;
  padding: 15px 10px;
  display: flex;
  flex-direction: column;
  gap: 15px;
  box-shadow: 0 6px 30px rgba(180, 140, 255, 0.3);
}
.group-item {
  text-align: center;
  cursor: pointer;
  padding: 8px 12px;
  border-radius: 12px;
  transition: all 0.3s ease;
  color: #7d6eb8;
  font-weight: 500;
}
.group-item:hover, .group-item.active {
  background: rgba(200, 160, 255, 0.3);
  color: #4b3c88;
}
</style>
</head>
<body>

<!-- 分组栏 -->
<div class="group-list">
  <div class="group-item active" data-group="piano">Piano</div>
  <div class="group-item" data-group="chinesesong">ChineseSong</div>
</div>

<!-- 播放列表 -->
<div id="playlist-container">
  <h3>Playlist</h3>
  <ul id="playlist"></ul>
</div>

<!-- 播放器 -->
<div class="elysia-player">
  <button id="prevBtn">⏮</button>
  <button id="playPauseBtn">▶</button>
  <button id="nextBtn">⏭</button>
  <span id="nowPlaying">Ready</span>
</div>

<script>
const songs = [
  { title: "My Soul, Your Beats!", src: "assets/MySoulYourBeats.mp3", group: "piano" },
  { title: "My Most Precious Treasure", src: "assets/MyMostPreciousTreasure.mp3", group: "piano" },
  { title: "Shiteki de Souseiteki", src: "assets/Shiteki.mp3", group: "chinesesong" },
  { title: "Call of Silence", src: "assets/CallOfSilence.mp3", group: "chinesesong" }
];

let currentGroup = "piano";
let currentIndex = 0;
let isPlaying = false;
const audio = new Audio();

const playlistEl = document.getElementById("playlist");
const playPauseBtn = document.getElementById("playPauseBtn");
const nowPlaying = document.getElementById("nowPlaying");

// 渲染分组歌曲
function renderPlaylist(group) {
  playlistEl.innerHTML = "";
  const filtered = songs.filter(s => s.group === group);
  filtered.forEach((song, i) => {
    const li = document.createElement("li");
    li.textContent = song.title;
    li.addEventListener("click", () => playSong(i, group));
    playlistEl.appendChild(li);
  });
  fadeIn(playlistEl);
}

function fadeIn(el) {
  el.style.opacity = 0;
  let o = 0;
  const timer = setInterval(() => {
    o += 0.05;
    el.style.opacity = o;
    if (o >= 1) clearInterval(timer);
  }, 30);
}

function playSong(index, group) {
  const filtered = songs.filter(s => s.group === group);
  currentIndex = index;
  audio.src = filtered[index].src;
  audio.play();
  isPlaying = true;
  playPauseBtn.textContent = "⏸";
  nowPlaying.textContent = filtered[index].title;
  updateActiveSong(index);
}

function updateActiveSong(index) {
  [...playlistEl.children].forEach((li, i) => {
    li.classList.toggle("active", i === index);
  });
}

playPauseBtn.addEventListener("click", () => {
  if (isPlaying) {
    audio.pause();
    playPauseBtn.textContent = "▶";
  } else {
    audio.play();
    playPauseBtn.textContent = "⏸";
  }
  isPlaying = !isPlaying;
});

document.querySelectorAll(".group-item").forEach(item => {
  item.addEventListener("click", () => {
    document.querySelectorAll(".group-item").forEach(i => i.classList.remove("active"));
    item.classList.add("active");
    currentGroup = item.dataset.group;
    renderPlaylist(currentGroup);
  });
});

renderPlaylist(currentGroup);
</script>

<footer style="text-align:center; margin-top:100px; color:#9a8bd0; font-size:13px;">© bestElysia 2025</footer>

</body>
</html>