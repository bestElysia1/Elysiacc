/* elysiamusic.css - V3: Fixed Glass UI & Fullscreen Logic */

/* =========================================
   1. åŸºç¡€å®¹å™¨
   ========================================= */
.elysia-player {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9999;
  
  /* è¿˜åŸåŸæœ¬çš„å°ºå¯¸æ„Ÿ */
  width: calc(100% - 36px);
  max-width: 600px; 
  height: 56px; /* é«˜åº¦è¿˜åŸï¼Œæ¯”V2ç¨å¾®çŸ®ä¸€ç‚¹ï¼Œæ›´ç²¾è‡´ */
  
  perspective: 1000px;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  
  /* æ¢å¤åŸæœ¬çš„æ‚¬æµ®åŠ¨ç”» */
  animation: elysiaFloat 6s ease-in-out infinite;
  transition: transform 0.4s cubic-bezier(0.3, 0.9, 0.3, 1), opacity 0.3s;
}

/* éšè—æ—¶çš„ä½ç½® */
.elysia-player.ui-hidden {
  transform: translate(-50%, 120%);
}

@keyframes elysiaFloat {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(-6px); }
}

/* =========================================
   2. è¿˜åŸï¼šé€äº®ç»ç’ƒé£æ ¼ (Original Glass Style)
   ========================================= */
.player-glass-card {
  position: relative;
  width: 100%;
  height: 100%;
  border-radius: 18px; /* è¿˜åŸåŸæœ¬çš„åœ†è§’å¤§å°ï¼Œä¸æ˜¯å®Œå…¨èƒ¶å›Š */
  overflow: hidden;

  /* ğŸ”¥ æ ¸å¿ƒä¿®å¤ï¼šè¿˜åŸåŸæœ¬çš„æ¸å˜é€äº®è‰² + è¾¹æ¡† + é˜´å½± */
  background: linear-gradient(120deg, 
      rgba(255,255,255,0.08) 0%,   
      rgba(255,255,255,0.08) 35%,  
      rgba(255,255,255,0.35) 50%,  
      rgba(255,255,255,0.08) 65%,  
      rgba(255,255,255,0.08) 100%
  );
  background-size: 250% 250%;   
  animation: shimmerBg 10s ease infinite; /* å¯é€‰ï¼šèƒŒæ™¯å¾®å…‰æµåŠ¨ */

  border: 1px solid rgba(255,255,255,0.25);
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
  
  box-shadow: 0 8px 32px rgba(31, 38, 135, 0.25), 
              inset 0 0 0 1px rgba(255, 255, 255, 0.1);
}

.player-face {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  padding: 0 12px; 
  gap: 12px;
}

/* --- å·¦ä¾§ï¼šç¼©ç•¥å›¾ (å®Œç¾åµŒå…¥æ¡†å†…) --- */
.mini-cover-wrapper {
  width: 40px; 
  height: 40px;
  border-radius: 8px; /* æ–¹å½¢åœ†è§’ï¼Œç¬¦åˆåŸæœ¬é£æ ¼ */
  overflow: hidden;
  flex-shrink: 0;
  cursor: pointer;
  border: 1px solid rgba(255,255,255,0.2);
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  position: relative;
}

.mini-cover-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.mini-cover-wrapper:active {
  transform: scale(0.95);
  opacity: 0.8;
}

/* --- ä¸­é—´ï¼šæ­Œæ›²ä¿¡æ¯ --- */
.mini-info {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

#songTitle {
  color: #fff;
  font-size: 0.95rem;
  font-weight: 500;
  white-space: nowrap;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3); /* åŠ å›æ–‡å­—é˜´å½±ï¼Œæ›´æ¸…æ™° */
  cursor: pointer;
  mask-image: linear-gradient(90deg, #000 85%, transparent 100%);
  -webkit-mask-image: linear-gradient(90deg, #000 85%, transparent 100%);
}

.scroll-inner { display: inline-block; padding-right: 20px; }
.scroll-inner.scrolling { animation: scrollText var(--scroll-duration, 8s) linear infinite; }
@keyframes scrollText { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

/* --- å³ä¾§ï¼šæŒ‰é’®ç»„ (åªä¿ç•™æ’­æ”¾å’Œä¸‹ä¸€é¦–) --- */
.elysia-controls {
  display: flex;
  gap: 8px;
  align-items: center;
  margin-right: 4px;
}

.elysia-controls button {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.15); /* å¾®é€äº®æŒ‰é’®åº•è‰² */
  border: none;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  backdrop-filter: blur(4px);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.1);
}

.elysia-controls button:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.05);
}
.elysia-controls button:active {
  transform: scale(0.95);
}
.elysia-controls button svg {
  width: 16px;
  height: 16px;
  fill: currentColor;
}

/* ğŸ”¥ å¼ºåˆ¶éšè—åˆ—è¡¨æŒ‰é’® (ç¬¦åˆä½ çš„è¦æ±‚) */
#playlistTitleBtn {
  display: none !important;
}

/* --- åº•éƒ¨è¿›åº¦æ¡ --- */
.elysia-progress-container {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 2px;
  background: rgba(255, 255, 255, 0.1);
  z-index: 10;
}
.elysia-progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #b48eff, #ff9eb5); /* ä¿æŒåŸæœ¬çš„ç²‰ç´«æ¸å˜ */
  box-shadow: 0 0 10px rgba(180, 142, 255, 0.5);
}

/* =========================================
   3. å…¨å±æ’­æ”¾å™¨ (ä¿®å¤å¡é¡¿é—®é¢˜)
   ========================================= */
.fullscreen-player {
  /* ğŸ”¥ å…³é”®ï¼šå› ä¸ºç§»å‡ºäº† elysia-player å®¹å™¨ï¼Œ
     position: fixed ç°åœ¨çš„å‚è€ƒç³»æ˜¯æ•´ä¸ªå±å¹•çª—å£ï¼Œ
     æ‰€ä»¥å®ƒä¸ä¼šå†è¢«å¡åœ¨å°æ¡†æ¡†é‡Œäº†ã€‚
  */
  position: fixed;
  inset: 0; 
  z-index: 10000;
  background: #000;
  display: flex;
  flex-direction: column;
  align-items: center;
  
  transform: translateY(100%);
  opacity: 0;
  pointer-events: none;
  
  transition: transform 0.45s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.4s ease;
}

.fullscreen-player.active {
  transform: translateY(0);
  opacity: 1;
  pointer-events: auto;
}

/* èƒŒæ™¯æ¨¡ç³Š */
.fs-bg {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center;
  filter: blur(40px) brightness(0.5);
  transform: scale(1.1);
  z-index: -1;
  transition: background-image 0.5s ease;
}
/* é®ç½©ï¼Œè®©å­—æ›´æ¸…æ¥š */
.fullscreen-player::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(to bottom, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.6) 100%);
  pointer-events: none;
  z-index: -1;
}

/* é¡¶éƒ¨ä¸‹æ‹‰æ¡ */
.fs-drag-indicator {
  width: 36px;
  height: 4px;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 2px;
  margin-top: 15px;
}

/* å¤´éƒ¨ (å…³é—­æŒ‰é’®) */
.fs-header {
  width: 100%;
  height: 60px;
  display: flex;
  justify-content: flex-end; /* æŒ‰é’®åœ¨å³è¾¹ */
  align-items: center;
  padding: 0 24px;
  box-sizing: border-box;
}
.fs-close-btn {
  background: rgba(255,255,255,0.1);
  border: none;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  cursor: pointer;
  transition: background 0.2s;
}
.fs-close-btn:active { background: rgba(255,255,255,0.3); }

/* å…¨å±å†…å®¹åŒº */
.fs-content {
  flex: 1;
  width: 100%;
  max-width: 420px;
  padding: 0 32px 60px 32px;
  display: flex;
  flex-direction: column;
  justify-content: space-evenly;
  box-sizing: border-box;
}

/* å¤§å°é¢ */
.fs-cover-container {
  width: 100%;
  aspect-ratio: 1/1;
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.4);
  overflow: hidden;
  margin-bottom: 24px;
  transform: scale(0.9);
  transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.fullscreen-player.active .fs-cover-container {
  transform: scale(1);
}
.fs-cover { width: 100%; height: 100%; object-fit: cover; }

/* å­—ä½“æ ·å¼ */
.fs-info { text-align: left; margin-bottom: 30px; }
.fs-title { color: #fff; font-size: 1.6rem; font-weight: 700; line-height: 1.3; margin-bottom: 6px; }
.fs-artist { color: rgba(255,255,255,0.6); font-size: 1.1rem; }

/* å…¨å±è¿›åº¦æ¡ */
.fs-progress-wrap { width: 100%; margin-bottom: 40px; position: relative; padding: 10px 0; cursor: pointer; }
.fs-progress-bar-bg { width: 100%; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; position: relative; }
.fs-progress-bar-fill { width: 0%; height: 100%; background: #fff; border-radius: 2px; position: relative; }
.fs-progress-dot {
  position: absolute; right: -6px; top: 50%; transform: translateY(-50%) scale(0);
  width: 14px; height: 14px; background: #fff; border-radius: 50%;
  box-shadow: 0 0 10px rgba(255,255,255,0.5); transition: transform 0.2s;
}
.fs-progress-wrap:active .fs-progress-dot, .fs-progress-bar-bg:hover .fs-progress-dot { transform: translateY(-50%) scale(1); }
.fs-time { position: absolute; top: 20px; font-size: 0.8rem; color: rgba(255,255,255,0.5); font-family: monospace; }
.fs-time.current { left: 0; }
.fs-time.total { right: 0; }

/* å…¨å±æ§åˆ¶æŒ‰é’® */
.fs-controls { display: flex; justify-content: space-between; align-items: center; }
.fs-btn { background: none; border: none; color: #fff; cursor: pointer; display: flex; align-items: center; justify-content: center; opacity: 0.85; }
.fs-btn:active { transform: scale(0.9); }
.fs-btn svg { width: 30px; height: 30px; fill: currentColor; }
.fs-btn.play-lg {
  width: 76px; height: 76px; border-radius: 50%; background: #fff; color: #000;
  box-shadow: 0 8px 20px rgba(255,255,255,0.3); opacity: 1;
}
.fs-btn.play-lg svg { fill: #000; width: 32px; height: 32px; margin-left: 4px; }
.fs-btn.play-lg.playing svg { margin-left: 0; }
.fs-btn.heart.liked { color: #ff6b81; opacity: 1; }
